<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Mediterranean Sweets</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <header class="main-header">
        <div class="header-content">
            <div class="header-left">
                <a href="{{ url_for('index') }}" class="logo-link">
                    <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Mediterranean Sweets" class="logo">
                    <h1 class="brand-name">Mediterranean Sweets</h1>
                </a>
            </div>

            <nav class="nav-main">
                <div class="nav-links">
                    <a href="{{ url_for('index') }}" class="nav-link">ğŸ  Home</a>
                    <a href="{{ url_for('products') }}" class="nav-link">ğŸª Products</a>
                    <a href="{{ url_for('basket') }}" class="nav-link basket-link">
                        <span class="basket-icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path d="M17,18A2,2 0 0,1 19,20A2,2 0 0,1 17,22C15.89,22 15,21.1 15,20C15,18.89 15.89,18 17,18M1,2H4.27L5.21,4H20A1,1 0 0,1 21,5C21,5.17 20.95,5.34 20.88,5.5L17.3,11.97C16.96,12.58 16.3,13 15.55,13H8.1L7.2,14.63L7.17,14.75A0.25,0.25 0 0,0 7,15.75V17H18V18H7L5,20H18C19,20 20,19 20,18H5.76L5.21,4H4.27L1,2ZM7,12C7,12 7.5,12.5 7,13C6.5,13.5 6,13 6,13C6,12.5 6.5,12 7,12Z"/>
                            </svg>
                            {% if basket_count > 0 %}
                            <span class="basket-count">{{ basket_count }}</span>
                            {% endif %}
                        </span>
                        Basket
                    </a>
                </div>

                <div class="nav-actions">
                    <button class="nav-action-btn" id="searchToggle" aria-label="Search">
                        ğŸ”
                    </button>

                    <div class="account-dropdown">
                        <button class="nav-action-btn" id="accountBtn" aria-label="Account">
                            ğŸ‘¤
                        </button>
                        <div class="dropdown-content">
                            <a href="#" class="dropdown-link">ğŸ‘¤ Profile</a>
                            <a href="#" class="dropdown-link">ğŸ“¦ Orders</a>
                            <a href="#" class="dropdown-link">â¤ï¸ Wishlist</a>
                            <a href="#" class="dropdown-link">ğŸ¯ Preferences</a>
                            <hr class="dropdown-divider">
                            <a href="#" class="dropdown-link">ğŸšª Logout</a>
                        </div>
                    </div>

                    <div class="lang-selector">
                        <button class="nav-action-btn" id="langBtn" aria-label="Language">
                            ğŸŒ EN
                        </button>
                        <div class="dropdown-content">
                            <a href="#" class="dropdown-link" data-lang="en">ğŸ‡ºğŸ‡¸ English</a>
                            <a href="#" class="dropdown-link" data-lang="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</a>
                            <a href="#" class="dropdown-link" data-lang="fr">ğŸ‡«ğŸ‡· FranÃ§ais</a>
                        </div>
                    </div>

                    <button class="nav-action-btn mobile-menu-toggle" id="menuToggle" aria-label="Menu">
                        â˜°
                    </button>
                </div>

                <div class="nav-search" id="navSearch">
                    <input type="text" placeholder="Search pastries..." class="search-input">
                    <button class="search-submit" type="submit">ğŸ”</button>
                </div>
            </nav>
        </div>

        <div class="mobile-menu" id="mobileMenu">
            <div class="mobile-menu-content">
                <button class="mobile-menu-close" id="mobileMenuClose">âœ•</button>
                <a href="{{ url_for('index') }}" class="mobile-menu-link">ğŸ  Home</a>
                <a href="{{ url_for('products') }}" class="mobile-menu-link">ğŸª Products</a>
                <a href="{{ url_for('basket') }}" class="mobile-menu-link">
                    <span class="basket-icon">
                        ğŸ›’
                        {% if basket_count > 0 %}
                        <span class="basket-count">{{ basket_count }}</span>
                        {% endif %}
                    </span>
                    Basket
                </a>

                <div class="mobile-menu-section">
                    <h3>Account</h3>
                    <a href="#" class="mobile-menu-link">ğŸ‘¤ Profile</a>
                    <a href="#" class="mobile-menu-link">ğŸ“¦ Orders</a>
                    <a href="#" class="mobile-menu-link">â¤ï¸ Wishlist</a>
                </div>

                <div class="mobile-menu-section">
                    <h3>Language</h3>
                    <a href="#" class="mobile-menu-link">ğŸ‡ºğŸ‡¸ English</a>
                    <a href="#" class="mobile-menu-link">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</a>
                    <a href="#" class="mobile-menu-link">ğŸ‡«ğŸ‡· FranÃ§ais</a>
                </div>
            </div>
        </div>
    </header>

    <main>
        <h2>Checkout</h2>
        {% if items %}
        <div class="checkout-content">
            <div class="order-summary">
                <h3>Order Summary</h3>
                <ul>
                    {% for item_key, item in items.items() %}
                    <li>{{ item.product.name }} x{{ item.quantity }} - ${{ "%.2f"|format(item.total) }}</li>
                    {% endfor %}
                </ul>
                <p><strong>Total: ${{ "%.2f"|format(total) }}</strong></p>
            </div>
            <form action="{{ url_for('process_order') }}" method="POST" class="checkout-form">
                <input type="hidden" name="total" value="{{ total }}">
                <h3>Customer Information</h3>
                <label for="name">Full Name:</label>
                <input type="text" id="name" name="name" required>

                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>

                <label for="phone">Phone:</label>
                <input type="tel" id="phone" name="phone" required>

                <label for="address">Delivery Address:</label>
                <textarea id="address" name="address" required></textarea>

                <h3>Payment (Simulated)</h3>
                <p>Card Number: 1234 5678 9012 3456</p>
                <p>Expiry: 12/25</p>
                <p>CVV: 123</p>

                <button type="submit" class="btn-primary">Complete Order</button>
            </form>
        </div>
        {% else %}
        <p>No items in basket. <a href="{{ url_for('products') }}">Go back to products</a></p>
        {% endif %}
        {% if error %}
        <p style="color: red;">{{ error }}</p>
        {% endif %}
    </main>

    <footer>
        <p>&copy; 2025 Mediterranean Sweets. All rights reserved.</p>
    </footer>

    <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
</body>
</html>
